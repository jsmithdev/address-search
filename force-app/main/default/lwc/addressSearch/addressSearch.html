<template>
    
    <div class="container">

        <lightning-input 
            type="search" 
            label={label} 
            value={query} 
            placeholder={placeholder} 
            onchange={handleKeyChange} 
            class="slds-m-bottom_small">
        </lightning-input>

        <template if:true={searchResults.length}>
            <div id="listbox" role="listbox">
                <ul class="slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown_fluid " role="presentation">

                    <template for:each={searchResults} for:item="result">
                        <li key={result.id} role="presentation" class="slds-listbox__item">
                            <span class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                                role="option" 
                                onclick={handleResultClick}
                                data-id={result.id}>

                                <span class="slds-media__figure">
                                    <lightning-icon icon-name={icon} size="small" alternative-text="Result item icon" ></lightning-icon>
                                </span>
                                <span class="slds-media__body">
                                    <span class="slds-listbox__option-text slds-listbox__option-text_entity">{result.full}</span>
                                </span>
                            </span>
                        </li>
                    </template>

                </ul>
            </div>
        </template>
        
    </div>
</template>